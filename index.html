<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secure Chrome/iOS Livestream</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      text-align: center;
    }

    #video-container, #fallback-message {
      display: none;
    }

    .video-wrapper {
      position: relative;
      width: 90vw;
      max-width: 960px;
      aspect-ratio: 16 / 9;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      pointer-events: none;
    }

    .overlay-block {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
    }

    .click-to-unmute {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #00c6ff, #0072ff);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3;
      font-size: 1.8rem;
      font-weight: bold;
      cursor: pointer;
      animation: pulse 1.5s infinite;
      border-radius: 8px;
      text-shadow: 1px 1px 4px #000;
      user-select: none;
    }

    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    .scroll-banner {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.75);
      color: #fff;
      font-size: 1rem;
      padding: 5px 0;
      white-space: nowrap;
      overflow: hidden;
      z-index: 4;
    }

    .scroll-banner span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-left 15s linear infinite;
    }

    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
  </style>
</head>
<body>

  <div id="video-container">
    <div class="video-wrapper">
      <div id="player"></div>
      <div class="overlay-block"></div>
      <div class="click-to-unmute" id="unmute-overlay">üîä Tap to Unmute</div>
      <div class="scroll-banner"><span>üì∫ Live Streaming ‚Äî No Skipping | Optimized for Chrome and iOS | Stay Tuned for More!</span></div>
    </div>
  </div>

  <div id="fallback-message">
    <h2>‚ö†Ô∏è This livestream is only available in Google Chrome (desktop/Android) and Safari/Chrome on iOS.</h2>
    <p>Please use one of these browsers to view the video.</p>
  </div>

  <noscript>
    <style> body { display: none; } </style>
    <div style="color: white; background: black; padding: 2rem;">
      <h2>‚ö†Ô∏è JavaScript must be enabled to view this livestream.</h2>
    </div>
  </noscript>

  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    function isAllowedBrowser() {
      const ua = navigator.userAgent;
      const isAndroid = /Android/i.test(ua);
      const isIOS = /iPhone|iPad|iPod/i.test(ua);

      const isDesktopChrome = /Chrome\/[.0-9]* Safari\/[.0-9]*$/.test(ua) &&
        !/Edg|OPR|Brave|Vivaldi/i.test(ua);

      const isChromeOnAndroid = isAndroid &&
        /Chrome\/[.0-9]* Mobile/i.test(ua) &&
        !/EdgA|OPR|Brave|SamsungBrowser/i.test(ua);

      const isChromeOniOS = isIOS && /CriOS/i.test(ua);
      const isSafariOniOS = isIOS && /Version\/[\d\.]+.*Safari/.test(ua);

      return isDesktopChrome || isChromeOnAndroid || isChromeOniOS || isSafariOniOS;
    }

    const playlist = [
      'MFLVmAE4cqg',  // üîÅ Replace with your YouTube video IDs
      'u2IEDVXPcc8',
      '9P9YMgPvr1E'
    ];

    let player;
    let currentVideoIndex = 0;
    let maxTimeReached = 0;
    const LIVE_DELAY_SECONDS = 5;
    let userUnmuted = false;

    function onYouTubeIframeAPIReady() {
      if (!isAllowedBrowser()) {
        document.getElementById('fallback-message').style.display = 'block';
        return;
      }

      document.getElementById('video-container').style.display = 'block';
      loadVideo(playlist[currentVideoIndex]);
    }

    function loadVideo(videoId) {
      player = new YT.Player('player', {
        videoId: videoId,
        playerVars: {
          autoplay: 1,
          mute: 1,
          controls: 0,
          disablekb: 1,
          modestbranding: 1,
          rel: 0,
          playsinline: 1
        },
        events: {
          onReady: (event) => {
            event.target.playVideo();
            startAntiSeekCheck();
            if (userUnmuted) {
              event.target.unMute();
              document.getElementById('unmute-overlay').style.display = 'none';
            }
          },
          onStateChange: (event) => {
            if (event.data === YT.PlayerState.ENDED) {
              currentVideoIndex++;
              if (currentVideoIndex < playlist.length) {
                loadVideo(playlist[currentVideoIndex]);
              }
            }
          }
        }
      });
    }

    function startAntiSeekCheck() {
      maxTimeReached = 0;
      setInterval(() => {
        if (!player || !player.getCurrentTime) return;
        const currentTime = player.getCurrentTime();
        if (currentTime > maxTimeReached) maxTimeReached = currentTime;
        if (currentTime < maxTimeReached - LIVE_DELAY_SECONDS) {
          player.seekTo(maxTimeReached - LIVE_DELAY_SECONDS, true);
        }
      }, 1000);
    }

    document.addEventListener('click', () => {
      const overlay = document.getElementById('unmute-overlay');
      if (overlay && player && typeof player.unMute === 'function') {
        player.unMute();
        userUnmuted = true; // ‚úÖ persist across playlist videos
        overlay.style.display = 'none';
      }
    }, { once: true });
  </script>
</body>
</html>
